<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<%#
= Required methods

juli(1) template must have following methods:

title::       title string
prototype::   prototype url
javascript::  javascript url
stylesheet::  stylesheet url
body::        generate html

= Optional methods

Following helper methods are optional:

contents::    draw contents of page
%>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="copyright" content="Copyright &#169; Fumisky Wells" />
  <title><%= title %></title>
  <script src="<%= prototype %>"  type="text/javascript"></script>
<script type='text/javascript'>
<%#

slideshow handling class.

= How lib/juli/visitor/slidy.rb and lib/juli/template/slidy.html Collaborate

1. Juli::Visitor::Slidy VISITOR-pattern in juli(1) generates
   <div class='slide'>...</div> per level 1 headline contents.
1. Then, when viewing, JuliSlidy Javascript object gathers level 1 contents,
   and hide all contents except for the top slide.

So that not only wikipage but also <div class='slide'> elements in template
are also treated as a part of slide pages.
%>
var JuliSlidy = Class.create({
  initialize: function(){
    this.slides     = $$('div.slide');
    this.curr_slide = 0;
    this.keydownCB  = this._keydownCB.bind(this);
    this.clickCB    = this.next.bind(this);
    this.show_top();
    this.show_footer();
  },

  // show top page only and hide all other pages
  show_top: function(){
    this.slides.each(function(slide){ slide.hide(); });
    this.slides[0].show();
  },

  // show footer
  show_footer: function(){
    $('total_page').update(this.slides.length);
    this.update_curr_page();
  },

  // update footer's curr_page
  update_curr_page: function(){
    $('curr_page').update(this.curr_slide + 1);
  },

  // navigate next page
  next: function(e){
    if( this.curr_slide < this.slides.length - 1 ){
      this.slides[this.curr_slide].hide();
      this.curr_slide++;
      this.slides[this.curr_slide].show();
      this.update_curr_page();
    }
  },

  // navigate previous page
  prev: function(e){
    if( this.curr_slide > 0 ){
      this.slides[this.curr_slide].hide();
      this.curr_slide--;
      this.slides[this.curr_slide].show();
      this.update_curr_page();
    }
  },
  _keydownCB: function(e){
    if( e.keyCode == Event.KEY_RIGHT ){
      this.next(e);
    }else if( e.keyCode == Event.KEY_LEFT ){
      this.prev(e);
    }
  }
});
</script>

<style type="text/css">
body {
  font-size:      14pt;
}

h1, h2, h3, h4, h5, h6 {
  color:          #527bbd;
  margin-top:     0.5em;
  margin-bottom:  0.5em;
  line-height:    1.3;
}

h1, h2, h3 {
  border-bottom:  2px solid silver;
}

h2 {
  padding-top:    0.5em;
}

/* table related */
table {
  border:           1px;
}
table th {
  background-color: #db6;
}

/* block quote */
blockquote {
  background:       #eec;
  border:           1px solid #444;
}
blockquote pre {
  margin:           2px;
}

div.footer {
  position:         fixed;
  z-index:          100;
  top:              auto;
  bottom:           0;
  left:             0;
  right:            0;
  height:           2em;
  font-size:        60%;
  background-color: #ddf;
}
</style>

</head>
<body>
<%# Embed warning plate below for generated document: %>
<!--

                    DO NOT MODIFY THIS FILE DIRECTORY!

This file is automatically generated from a text file by juli(1).

Thanks!
-->
<div class='slide'>
  <h1><%= title %></h1>
  Fumisky wells

  <br/><br/><br/><br/><br/><br/><br/><br/>
  <div style='font-size: 11pt; color: #aaa'>
    <ul>
    <li>Mouse click or Right(→) key to go to the next page.
    <li>Left(←) key to go to the previous page.
    </ul>
  </div>
</div>

<div class='slide'>
  <h2>Contents</h2>
  <%= contents %>
</div>

<%= body %>

<%#
Curr_page and total_page in footer below will be updated on the fly
so that please do not delete them.
%>
<div class=footer>
  <table width='100%'>
  <tr>
    <td>
      <a href="http://sourceforge.net/projects/jjjuli"
        ><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=390715&amp;type=8"
            width="80" height="15"
            alt="Get jj_juli at SourceForge.net. Fast, secure and Free Open Source software downloads"
            /></a> | Generated by <a href='http://jjjuli.sourceforge.net/'>juli <%= Juli::VERSION %></a>
    </td>
    <td align=right>
      slide <span id=curr_page></span>/<span id=total_page></span>
    </td>
  </tr>
  </table>
</div>
</body>
<script type='text/javascript'>
  document.observe('dom:loaded', function(){
    var juli_slidy = new JuliSlidy();
    document.observe('keydown', juli_slidy.keydownCB);
    document.observe('click',   juli_slidy.clickCB);
  });
</script>
</html>
